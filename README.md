# UVic Aero 2024

# Basic Procedure

Most files added to the repo will be containers for functions under 
```
root/src/functions
```
Function containers should only have what is necessary for the function to operate,
no testing code

Once functions are completed, you *must* write test programs to verify them

Tests live in the `root/test` directory, and should include the name of the function in the title

The tests import functions and call them with various inputs to generate outputs in the form 
of KML's, sets of datapoints, maps, plots etc

Data associated with tests goes in the data directory, data required for a test comes from
a subdirectory in the `root/data/test_input` directory, and data generated by tests goes in a subdirectory for the test
in `root/test_outputs`

# Starting a test

Once you have setup your test with all the boilerplate code, use the command 
```
python -m tests.your_tester # no .py extension
```
from the project root (whatever you named your clone of the repo) to start it

# Test setup

For tests to work in the directory strucuture there is some boiler plate code to include

# Boiler plate code for test output and import paths

This is how you make the function accesible to your test

import PATH
```
from pathlib import Path
```

Import required functions from `root/src/functions/your_function.py`
```
from src.functions.your_container import main_function, supporting_function, etc
```
## This is how to access the data subdirectories from your test

Define the output directory relative to the root of the project
```
project_root = Path(__file__).resolve().parent.parent
output_dir = project_root / 'data' / 'test_outputs' / '**Your_test_dir_here**'
output_dir.mkdir(parents=True, exist_ok=True)
```

Define the output file path
```
output_file = output_dir / 'tester_output.your_extension'
```
Same thing with inputs

# Useful code snippets:

### Code for generating unique test output names
```
def get_unique_filename(output_dir, base_name="tester_output", extension="your extension here"):
    index = 1
    while True:
        filename = f"{base_name}_{index}{extension}"
        output_file = output_dir / filename
        if not output_file.exists():
            return output_file
        index += 1
```

### Coordinates of soft boundary for day 1 and how to make a polygon with them

Define the Soft Boundary polygon coordinates
```
green_boundary_coords = [
    (50.0971537, -110.7329257),
    (50.1060519, -110.7328869),
    (50.1060793, -110.7436756),
    (50.1035452, -110.7436555),
    (50.0989139, -110.7381534),
    (50.0971788, -110.7381487),
    (50.0971537, -110.7329257)
]
```

Create a Polygon for the green boundary
```
green_boundary_polygon = Polygon(green_boundary_coords)
```
